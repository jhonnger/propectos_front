<div class="dialog-wrapper">
  <!-- Header -->
  <div class="dialog-header">
    <div class="dialog-header-left">
      <div class="dialog-icon-wrapper">
        <mat-icon>contact_phone</mat-icon>
      </div>
      <div>
        <h2 class="dialog-title">Registrar Contacto</h2>
        <p class="dialog-subtitle">Actualiza el estado del prospecto</p>
      </div>
    </div>
    <button mat-icon-button class="close-btn" (click)="onCancel()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Prospect Info Card -->
  <div class="prospect-info-card">
    <div class="prospect-avatar">{{ getInitials() }}</div>
    <div class="prospect-details">
      <span class="prospect-name">{{ data.name }}</span>
      <div class="prospect-phone">
        <mat-icon>phone</mat-icon>
        <span>{{ data.phone }}</span>
      </div>
    </div>
  </div>

  <!-- Form Content -->
  <div class="dialog-body">
    <form [formGroup]="contactForm" (ngSubmit)="onConfirm()" class="dialog-form">

      <!-- Call Result Section -->
      <div class="form-section">
        <div class="form-section-label">
          <mat-icon>call</mat-icon>
          <span>Resultado de la llamada</span>
        </div>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Contesto la llamada?</mat-label>
          <mat-select formControlName="contestoLlamada">
            <mat-option [value]="true">
              <div class="option-content">
                <mat-icon class="option-icon success-icon">check_circle</mat-icon>
                Si, contesto
              </div>
            </mat-option>
            <mat-option [value]="false">
              <div class="option-content">
                <mat-icon class="option-icon error-icon">cancel</mat-icon>
                No contesto
              </div>
            </mat-option>
          </mat-select>
          <mat-error *ngIf="contactForm.get('contestoLlamada')?.hasError('required')">
            Este campo es obligatorio
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Interest Level Section -->
      <div class="form-section" *ngIf="mostrarInteresado">
        <div class="form-section-label">
          <mat-icon>star</mat-icon>
          <span>Nivel de interes</span>
        </div>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Esta interesado?</mat-label>
          <mat-select formControlName="interesado">
            <mat-option [value]="true">
              <div class="option-content">
                <mat-icon class="option-icon success-icon">thumb_up</mat-icon>
                Si, interesado
              </div>
            </mat-option>
            <mat-option [value]="false">
              <div class="option-content">
                <mat-icon class="option-icon error-icon">thumb_down</mat-icon>
                No interesado
              </div>
            </mat-option>
          </mat-select>
          <mat-error *ngIf="contactForm.get('interesado')?.hasError('required')">
            Este campo es obligatorio
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Comment Section -->
      <div class="form-section">
        <div class="form-section-label">
          <mat-icon>comment</mat-icon>
          <span>Comentario</span>
        </div>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Escribe un comentario...</mat-label>
          <textarea matInput formControlName="comentario" rows="3"></textarea>
        </mat-form-field>
      </div>
    </form>
  </div>

  <!-- Actions -->
  <div class="dialog-actions">
    <button mat-stroked-button class="cancel-btn" (click)="onCancel()">
      Cancelar
    </button>
    <button mat-flat-button class="save-btn" (click)="onConfirm()" [disabled]="!contactForm.valid">
      <mat-icon>save</mat-icon>
      <span>Registrar Contacto</span>
    </button>
  </div>
</div>
