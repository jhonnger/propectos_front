<div class="dialog-wrapper">
  <!-- Header -->
  <div class="dialog-header">
    <div class="header-left">
      <div class="header-icon-wrapper">
        <mat-icon>contact_phone</mat-icon>
      </div>
      <div>
        <h2 class="dialog-title">Registrar Contacto</h2>
        <p class="dialog-subtitle">Actualiza el estado del prospecto</p>
      </div>
    </div>
    <button mat-icon-button class="close-btn" (click)="onCancel()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Prospect Info -->
  <div class="prospect-info">
    <div class="prospect-avatar">{{ getInitials() }}</div>
    <div class="prospect-details">
      <span class="prospect-name">{{ data.name }}</span>
      <div class="prospect-phone">
        <mat-icon class="phone-icon">phone</mat-icon>
        <span>{{ data.phone }}</span>
      </div>
    </div>
  </div>

  <!-- Form -->
  <form [formGroup]="contactForm" (ngSubmit)="onConfirm()" class="dialog-form">
    <div class="form-section">
      <label class="form-section-label">
        <mat-icon class="section-label-icon">call</mat-icon>
        Resultado de la llamada
      </label>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Contesto la llamada?</mat-label>
        <mat-select formControlName="contestoLlamada">
          <mat-option [value]="true">
            <div class="option-content">
              <mat-icon class="option-icon success-icon">check_circle</mat-icon>
              Si, contesto
            </div>
          </mat-option>
          <mat-option [value]="false">
            <div class="option-content">
              <mat-icon class="option-icon error-icon">cancel</mat-icon>
              No contesto
            </div>
          </mat-option>
        </mat-select>
        <mat-error *ngIf="contactForm.get('contestoLlamada')?.hasError('required')">
          Este campo es obligatorio
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-section" *ngIf="mostrarInteresado">
      <label class="form-section-label">
        <mat-icon class="section-label-icon">star</mat-icon>
        Nivel de interes
      </label>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Esta interesado?</mat-label>
        <mat-select formControlName="interesado">
          <mat-option [value]="true">
            <div class="option-content">
              <mat-icon class="option-icon success-icon">thumb_up</mat-icon>
              Si, interesado
            </div>
          </mat-option>
          <mat-option [value]="false">
            <div class="option-content">
              <mat-icon class="option-icon error-icon">thumb_down</mat-icon>
              No interesado
            </div>
          </mat-option>
        </mat-select>
        <mat-error *ngIf="contactForm.get('interesado')?.hasError('required')">
          Este campo es obligatorio
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-section">
      <label class="form-section-label">
        <mat-icon class="section-label-icon">comment</mat-icon>
        Comentario
      </label>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Escribe un comentario...</mat-label>
        <textarea matInput formControlName="comentario" rows="3"></textarea>
      </mat-form-field>
    </div>
  </form>

  <!-- Actions -->
  <div class="dialog-actions">
    <button mat-stroked-button class="cancel-btn" (click)="onCancel()">
      Cancelar
    </button>
    <button mat-flat-button class="confirm-btn" (click)="onConfirm()" [disabled]="!contactForm.valid">
      <mat-icon>save</mat-icon>
      Registrar Contacto
    </button>
  </div>
</div>
